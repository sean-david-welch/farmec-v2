import{j as a,u as i,F as b,C as f,c as h}from"./index-DXUOx5ZN.js";const k=({warrantyClaim:o,partsRequired:c,registration:e})=>{async function r(u){u.preventDefault();let _="",t={};o&&c?(_="warranty",c.map(n=>({part_number:n.part_number,quantity_needed:n.quantity_needed,invoice_number:n.invoice_number,description:n.description})),t={warranty:{dealer:o.dealer,dealer_contact:o.dealer_contact,owner_name:o.owner_name,machine_model:o.machine_model,serial_number:o.serial_number,install_date:o.install_date,failure_date:o.failure_date,repair_date:o.repair_date,failure_details:o.failure_details,repair_details:o.repair_details,labour_hours:o.labour_hours,completed_by:o.completed_by},parts:c}):e&&(_="registration",t={dealer_name:e.dealer_name,dealer_address:e.dealer_address,owner_name:e.owner_name,owner_address:e.owner_address,machine_model:e.machine_model,serial_number:e.serial_number,install_date:e.install_date,invoice_number:e.invoice_number,complete_supply:e.complete_supply,pdi_complete:e.pdi_complete,pto_correct:e.pto_correct,machine_test_run:e.machine_test_run,safety_induction:e.safety_induction,operator_handbook:e.operator_handbook,date:e.date,completed_by:e.completed_by});const p=new URL(`api/pdf/${_}`,h.baseUrl),m=(n,l)=>{console.log(n,l);const s=window.URL.createObjectURL(n),d=document.createElement("a");d.href=s,d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(s)};try{const n=await fetch(p.toString(),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Network response was not ok");const l=await n.blob();m(l,o?`${o.owner_name}.pdf`:e?`${e.owner_name}.pdf`:"defaultFilename.pdf")}catch(n){console.error("Error downloading the file:",n)}}return a.jsxs("button",{className:i.btn,onClick:r,children:["Download Form",a.jsx(b,{icon:f})]})};export{k as D};
