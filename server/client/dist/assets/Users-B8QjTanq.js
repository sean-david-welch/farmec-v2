import{r as i,s as p,j as s,q as b,u as o,F as h,t as D,p as I}from"./index-BdVOQLH1.js";import{s as g}from"./Account.module-Df6Oqq_9.js";import{E as T}from"./Error-Ia1coLu6.js";import{f,F as B}from"./faPenToSquare-D6SjMlxH.js";import{D as H}from"./DeleteButton-jphrmmSq.js";const E=({id:r})=>{const[a,l]=i.useState(""),[c,e]=i.useState(""),[n,v]=i.useState("user"),[u,d]=i.useState(!1),{mutateAsync:w,isError:S,error:y,isPending:F}=p("users"),{mutateAsync:P,isError:C,error:N,isPending:U}=p("users",r),m=r?N:y,x=r?C:S,q=r?P:w,A=async t=>{t.preventDefault();const R={email:a,password:c,role:n};try{await q(R)&&!x&&d(!1)}catch(j){console.error("Error submitting form:",j)}};return F||U?s.jsx(b,{}):s.jsxs("section",{id:"form",children:[s.jsx("button",{className:o.btnForm,onClick:()=>d(!u),children:r?s.jsx(h,{icon:f.faPenToSquare}):s.jsxs("div",{children:["Create User",s.jsx(h,{icon:f.faPenToSquare})]})}),s.jsxs(B,{visible:u,onClose:()=>d(!1),children:[s.jsxs("form",{onSubmit:A,className:o.form,children:[s.jsx("label",{children:"Email:"}),s.jsx("input",{type:"email",value:a,onChange:t=>l(t.target.value),required:!0}),s.jsx("label",{children:"Password:"}),s.jsx("input",{type:"password",value:c,onChange:t=>e(t.target.value),required:!0}),s.jsx("label",{children:"Role:"}),s.jsxs("select",{value:n,onChange:t=>v(t.target.value),required:!0,children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"admin",children:"Admin"})]}),s.jsx("button",{className:o.btnForm,type:"submit",children:"Register"})]}),x&&s.jsxs("p",{children:["Error: ",m==null?void 0:m.message]})]})]})},V=()=>{const{isAdmin:r}=D(),{data:a,isLoading:l,isError:c}=I("users");return c?s.jsx(T,{}):l?s.jsx(b,{}):s.jsx("section",{id:"users",children:s.jsxs("div",{className:g.usersSection,children:[s.jsx("h1",{className:o.sectionHeading,children:"Users"}),s.jsx(E,{}),r&&(a==null?void 0:a.map(e=>{var n;return s.jsx(i.Fragment,{children:s.jsxs("div",{className:g.productView,children:[s.jsxs("h1",{className:o.mainHeading,children:[e.email," -- ",(n=e.CustomClaims)!=null&&n.admin?"Admin":"Not Admin"]}),s.jsxs("div",{className:o.optionsBtn,children:[s.jsx(E,{id:e.rawId}),s.jsx(H,{id:e==null?void 0:e.rawId,resourceKey:"users"})]})]})},e.rawId)}))]})})};export{V as default};
