import{r as i,s as h,j as e,q as b,u as o,F as p,t as D,p as I}from"./index-CYAi8XUF.js";import{s as g}from"./Account.module-rvB3Z4_I.js";import{E as T}from"./Error-D_75nCVZ.js";import{f,F as B}from"./faPenToSquare-H85bz21w.js";import{D as H}from"./DeleteButton-ZgpjB0f_.js";const E=({id:r})=>{const[a,l]=i.useState(""),[c,s]=i.useState(""),[n,v]=i.useState("user"),[u,d]=i.useState(!1),{mutateAsync:w,isError:S,error:y,isPending:F}=h("users"),{mutateAsync:P,isError:C,error:N,isPending:U}=h("users",r),m=r?N:y,x=r?C:S,q=r?P:w,A=async t=>{t.preventDefault();const R={email:a,password:c,role:n};try{await q(R)&&!x&&d(!1)}catch(j){console.error("Error submitting form:",j)}};return F||U?e.jsx(b,{}):e.jsxs("section",{id:"form",children:[e.jsx("button",{className:o.btnForm,onClick:()=>d(!u),children:r?e.jsx(p,{icon:f.faPenToSquare}):e.jsxs("div",{children:["Create User",e.jsx(p,{icon:f.faPenToSquare})]})}),e.jsxs(B,{visible:u,onClose:()=>d(!1),children:[e.jsxs("form",{onSubmit:A,className:o.form,children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",value:a,onChange:t=>l(t.target.value),required:!0}),e.jsx("label",{children:"Password:"}),e.jsx("input",{type:"password",value:c,onChange:t=>s(t.target.value),required:!0}),e.jsx("label",{children:"Role:"}),e.jsxs("select",{value:n,onChange:t=>v(t.target.value),required:!0,children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx("button",{className:o.btnForm,type:"submit",children:"Register"})]}),x&&e.jsxs("p",{children:["Error: ",m==null?void 0:m.message]})]})]})},V=()=>{const{isAdmin:r}=D(),{data:a,isLoading:l,isError:c}=I("users");return c?e.jsx(T,{}):l?e.jsx(b,{}):e.jsx("section",{id:"users",children:e.jsxs("div",{className:g.usersSection,children:[e.jsx("h1",{className:o.sectionHeading,children:"Users"}),e.jsx(E,{}),r&&(a==null?void 0:a.map(s=>{var n;return e.jsx(i.Fragment,{children:e.jsxs("div",{className:g.productView,children:[e.jsxs("h1",{className:o.mainHeading,children:[s.email," -- ",(n=s.CustomClaims)!=null&&n.admin?"Admin":"Not Admin"]}),e.jsxs("div",{className:o.optionsBtn,children:[e.jsx(E,{id:s.rawId}),e.jsx(H,{id:s==null?void 0:s.rawId,resourceKey:"users"})]})]})},s.rawId)}))]})})};export{V as default};
